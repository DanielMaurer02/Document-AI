FROM ghcr.io/astral-sh/uv:python3.13-bookworm

ARG HUGGINGFACE_API_KEY
ARG GROQ_API_KEY
ARG GROQ_MODEL
ARG CHROMA_HOST

ENV HUGGINGFACE_API_KEY=${HUGGINGFACE_API_KEY}
ENV GROQ_API_KEY=${GROQ_API_KEY}
ENV GROQ_MODEL=${GROQ_MODEL}
ENV CHROMA_HOST=${CHROMA_HOST}
ENV TOKENIZERS_PARALLELISM=False

COPY . /app
WORKDIR /app

# Install dependencies
RUN uv sync --locked

CMD ["uv", "run", "main.py"]
